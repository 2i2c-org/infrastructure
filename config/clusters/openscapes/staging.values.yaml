basehub:
  jupyterhub:
    ingress:
      hosts: [staging.openscapes.2i2c.cloud]
      tls:
        - hosts: [staging.openscapes.2i2c.cloud]
          secretName: https-auto-tls
    hub:
      config:
        JupyterHub:
          authenticator_class: cilogon
        CILogonOAuthenticator:
          scope:
            - "profile"
          username_claim: "preferred_username"
          oauth_callback_url: "https://staging.openscapes.2i2c.cloud/hub/oauth_callback"
          # Only show the option to login with GitHub
          shown_idps:
            - http://github.com/login/oauth/authorize
    singleuser:
      profileList:
        # NOTE: About node sharing
        #
        #       CPU/Memory requests/limits are actively considered still. This
        #       profile list is setup to involve node sharing as considered in
        #       https://github.com/2i2c-org/infrastructure/issues/2121.
        #
        #       - Memory requests are different from the description, based on:
        #         whats found to remain allocate in k8s, subtracting 1GiB
        #         overhead for misc system pods, and transitioning from GB in
        #         description to GiB in mem_guarantee.
        #       - CPU requests are lower than the description, with a factor of
        #         10%.
        #
        - display_name: "Small: up to 4 CPU / 32 GB RAM"
          description: &profile_list_description "Start a container with at least a chosen share of capacity on a node of this type"
          slug: small
          default: true
          profile_options:
            image: &profile_options_image
              display_name: Image
              choices:
                python:
                  display_name: Python
                  default: true
                  slug: python
                  kubespawner_override:
                    image: openscapes/python:f577786
                rocker:
                  display_name: R
                  slug: rocker
                  kubespawner_override:
                    image: openscapes/rocker:a7596b5
                matlab:
                  display_name: Matlab
                  slug: matlab
                  kubespawner_override:
                    image: openscapes/matlab:2023-06-20
