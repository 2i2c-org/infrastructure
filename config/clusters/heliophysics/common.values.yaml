nfs:
  enabled: true
  pv:
    enabled: true
    mountOptions:
    - rsize=1048576
    - wsize=1048576
    - timeo=600
    - soft   # We pick soft over hard, so NFS lockups don't lead to hung processes
    - retrans=2
    - noresvport
    baseShareName: /

jupyterhub:
  custom:
    2i2c:
      add_staff_user_ids_to_admin_users: false
    homepage:
      gitRepoBranch: unify-logins-2
      templateVars:
        org:
          name: Heliophysics
          logo_url: https://2i2c.org/media/logo.png
          url: https://2i2c.org
        designed_by:
          name: 2i2c
          url: https://2i2c.org
        operated_by:
          name: 2i2c
          url: https://2i2c.org
        funded_by:
          name: Heliophysics
          url: https://2i2c.org
  hub:
    allowNamedServers: true
    config:
      JupyterHub:
        authenticator_class: dummy
      Authenticator:
        admin_users: []

  scheduling:
    userScheduler:
      enabled: true

  singleuser:
    defaultUrl: /lab

    profileList:
    - display_name: Choose your environment and resources
      slug: only-choice
      profile_options:
        image:
          display_name: Image
          unlisted_choice:
            # We want to only support 4 environments
            enabled: false
          choices:
            heliocloud-base:
              display_name: HelioCloud Base Image
              description: Some description
              kubespawner_override:
                image: quay.io/pangeo/pangeo-notebook:2025.08.14
                default_url: /lab/tree/heliocloud-base-2025-update/Welcome.ipynb
                init_containers:
                - &volume_ownership_fix_initcontainer
                  name: volume-mount-ownership-fix
                  image: busybox:1.36.1
                  command:
                  - sh
                  - -c
                  - id && chown 1000:1000 /home/jovyan && ls -lhd /home/jovyan
                  securityContext:
                    runAsUser: 0
                  volumeMounts:
                  - name: home
                    mountPath: /home/jovyan
                    subPath: '{escaped_username}'
                    # Mounted without readonly attribute here,
                    # so we can chown it appropriately
                  - name: home
                    mountPath: /home/jovyan/shared
                    subPath: _shared
                  - name: home
                    mountPath: /home/jovyan/shared-public
                    subPath: _shared-public
                - name: jupyterhub-gitpuller-init
                  image: public.ecr.aws/nasa-veda/jupyterhub-gitpuller-init:97eb45f9d23b128aff810e45911857d5cffd05c2
                  env:
                  - name: TARGET_PATH
                    value: heliocloud-base-2025-update
                  - name: SOURCE_REPO
                    value: https://github.com/heliophysicsPy/science-platforms-coordination
                  - name: SOURCE_BRANCH
                    value: heliocloud-base-2025-update
                  volumeMounts:
                  - name: home
                    mountPath: /home/jovyan
                    subPath: '{escaped_username}'
                  securityContext:
                    runAsUser: 1000
                    runAsGroup: 1000
              default: true
            pyhc:
              display_name: PyHC Environment
              description: Some description
              kubespawner_override:
                image: quay.io/pangeo/pangeo-notebook:2025.08.14
                # default_url: /lab/tree/pyhc/Welcome.ipynb
                init_containers:
                - *volume_ownership_fix_initcontainer
                - name: jupyterhub-gitpuller-init
                  image: public.ecr.aws/nasa-veda/jupyterhub-gitpuller-init:97eb45f9d23b128aff810e45911857d5cffd05c2
                  env:
                  - name: TARGET_PATH
                    value: pyhc
                  - name: SOURCE_REPO
                    value: https://github.com/heliophysicsPy/science-platforms-coordination
                  - name: SOURCE_BRANCH
                    value: pyhc
                  volumeMounts:
                  - name: home
                    mountPath: /home/jovyan
                    subPath: '{escaped_username}'
                  securityContext:
                    runAsUser: 1000
                    runAsGroup: 1000
            heliophysics-core-survey:
              display_name: Heliophysics "Core" Survey Environment
              description: Some description
              kubespawner_override:
                image: quay.io/pangeo/pangeo-notebook:2025.08.14
                default_url: /lab/tree/heliocloud-base-w-survey-core/Welcome.ipynb
                init_containers:
                - *volume_ownership_fix_initcontainer
                - name: jupyterhub-gitpuller-init
                  image: public.ecr.aws/nasa-veda/jupyterhub-gitpuller-init:97eb45f9d23b128aff810e45911857d5cffd05c2
                  env:
                  - name: TARGET_PATH
                    value: heliocloud-base-w-survey-core
                  - name: SOURCE_REPO
                    value: https://github.com/heliophysicsPy/science-platforms-coordination
                  - name: SOURCE_BRANCH
                    value: heliocloud-base-w-survey-core
                  volumeMounts:
                  - name: home
                    mountPath: /home/jovyan
                    subPath: '{escaped_username}'
                  securityContext:
                    runAsUser: 1000
                    runAsGroup: 1000
            heliophysics-extended-survey:
              display_name: Heliophysics "Extended" Survey Environment
              description: Some description
              kubespawner_override:
                image: quay.io/pangeo/pangeo-notebook:2025.08.14
                default_url: /lab/tree/heliocloud-base-w-survey-extended/Welcome.ipynb
                init_containers:
                - *volume_ownership_fix_initcontainer
                - name: jupyterhub-gitpuller-init
                  image: public.ecr.aws/nasa-veda/jupyterhub-gitpuller-init:97eb45f9d23b128aff810e45911857d5cffd05c2
                  env:
                  - name: TARGET_PATH
                    value: heliocloud-base-w-survey-extended
                  - name: SOURCE_REPO
                    value: https://github.com/heliophysicsPy/science-platforms-coordination
                  - name: SOURCE_BRANCH
                    value: heliocloud-base-w-survey-extended
                  volumeMounts:
                  - name: home
                    mountPath: /home/jovyan
                    subPath: '{escaped_username}'
                  securityContext:
                    runAsUser: 1000
                    runAsGroup: 1000
        resource_allocation:
          display_name: Resource Allocation
          choices:
            mem_2_gb:
              display_name: ~2 GB RAM, ~0.2 CPUs
              description: Up to ~4 CPUs when available
              kubespawner_override:
                mem_guarantee: 1951419879
                mem_limit: 1951419879
                cpu_guarantee: 0.22815625
                cpu_limit: 3.6505
                node_selector:
                  node.kubernetes.io/instance-type: r5.xlarge
            mem_4_gb:
              display_name: ~4 GB RAM, ~0.5 CPUs
              description: Up to ~4 CPUs when available
              kubespawner_override:
                mem_guarantee: 3902839759
                mem_limit: 3902839759
                cpu_guarantee: 0.4563125
                cpu_limit: 3.6505
                node_selector:
                  node.kubernetes.io/instance-type: r5.xlarge
            mem_7_gb:
              display_name: ~7 GB RAM, ~0.9 CPUs
              description: Up to ~4 CPUs when available
              kubespawner_override:
                mem_guarantee: 7805679519
                mem_limit: 7805679519
                cpu_guarantee: 0.912625
                cpu_limit: 3.6505
                node_selector:
                  node.kubernetes.io/instance-type: r5.xlarge
            mem_15_gb:
              display_name: ~15 GB RAM, ~1.8 CPUs
              description: Up to ~4 CPUs when available
              kubespawner_override:
                mem_guarantee: 15611359038
                mem_limit: 15611359038
                cpu_guarantee: 1.82525
                cpu_limit: 3.6505
                node_selector:
                  node.kubernetes.io/instance-type: r5.xlarge
            mem_29_gb:
              display_name: ~29 GB RAM, ~4 CPUs
              description: ~4 CPUs always available
              kubespawner_override:
                mem_guarantee: 31222718077
                mem_limit: 31222718077
                cpu_guarantee: 3.6505
                cpu_limit: 3.6505
                node_selector:
                  node.kubernetes.io/instance-type: r5.xlarge
            mem_60_gb:
              display_name: ~60 GB RAM, ~8 CPUs
              description: Up to ~15 CPUs when available
              kubespawner_override:
                mem_guarantee: 64020707016
                mem_limit: 64020707016
                cpu_guarantee: 7.69055
                cpu_limit: 15.3811
                node_selector:
                  node.kubernetes.io/instance-type: r5.4xlarge
            mem_119_gb:
              display_name: ~119 GB RAM, ~15 CPUs
              description: ~15 CPUs always available
              kubespawner_override:
                mem_guarantee: 128041414033
                mem_limit: 128041414033
                cpu_guarantee: 15.3811
                cpu_limit: 15.3811
                node_selector:
                  node.kubernetes.io/instance-type: r5.4xlarge
jupyterhub-home-nfs:
  enabled: true
  quotaEnforcer:
    config:
      QuotaManager:
        hard_quota: 10
  eks:
    enabled: true
  prometheusExporter:
    enabled: true
